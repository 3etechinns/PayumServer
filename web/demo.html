<html>
    <head>
        <link rel="stylesheet" type="text/css" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.5/css/bootstrap.min.css">

        <script src="https://code.jquery.com/jquery-2.1.4.min.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/js-url/2.0.2/url.js"></script>
        <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.5/js/bootstrap.min.js"></script>
        <script src="payum.js"></script>
    </head>

    <body style="margin: 20px;">
        <div>
            The demo is created to show how you can use <a href="https://github.com/Payum/PayumServer">PayumServer</a>.
            This is pure html,css,js app (look at source code)  where you can pay 1$. The server is <a href="http://server.payum.org">http://server.payum.org</a> and admin client
            is <a href="http://server.payum.org/client/index.html#/app/settings?api=http:%2F%2Fserver.payum.org">http://server.payum.org/client/index.html</a>
        </div>
        <div>
            
        </div>


        <div id="payum-previous-payment"></div>

        <button id="pay-btn" class="btn" value="Create">Pay 1$</button>

        <div id="payum-container"></div>

        <script>
            var payumServerUrl = "http://"+window.location.hostname;
            var payum = new Payum(payumServerUrl);

            // do new payment
            $('#pay-btn').click(function() {
                payum.payment.create(100, 'USD', function(payment) {
                    var afterUrl = "http://"+window.location.hostname +'/demo.html';

                    payum.token.create('capture', payment.id, afterUrl, function(token) {
                        payum.execute(token.targetUrl, '#payum-container');
                    });
                });
            });

            // show status of previous payment.
            if (paymentId = url('?paymentId', window.location.href)) {
                payum.payment.get(paymentId, function(payment) {
                    $('#payum-previous-payment').text('Previous payment '+paymentId+' status: '+ payment.status);
                });
            }
        </script>
    </body>
</html>
